â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
PROMPT 3#7: Create CrossroadsPage Component
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âš ï¸ CRITICAL COMPLIANCE REQUIREMENTS âš ï¸

1. Execute ONLY the instructions below - nothing more
2. Do NOT modify files not explicitly mentioned
3. Do NOT add features not explicitly requested
4. Do NOT refactor or "improve" existing code
5. If unclear, STOP and ask - do not assume
6. Make MINIMAL, SURGICAL changes only

FORBIDDEN ACTIONS:
- Modifying any existing components
- Changing routes yet (that's prompt 4)
- Adding unrequested features

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

TASK: Create CrossroadsPage - the main decision page

OBJECTIVE:
Create the page where users choose between auto-fix and manual review
after their CV has been scanned.

CONTEXT:
This page shows:
1. CV Score (using existing ScoreDashboard or score circle)
2. Issues Summary (using IssuesSummaryBox from prompt 1)
3. Two path cards (using PathCard from prompt 2)
4. Helpful tip at the bottom

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

INSTRUCTIONS:

Step 1: Create new file: client/src/pages/CVCrossroadsPage.tsx

Step 2: Implement the component with this structure:

import React, { useEffect, useState } from 'react';
import { useParams, useNavigate } from 'react-router-dom';
import IssuesSummaryBox from '../components/cv-optimizer/IssuesSummaryBox';
import PathCard from '../components/cv-optimizer/PathCard';

interface ReportData {
  score: number;
  totalIssues: number;
  breakdown: {
    critical: number;
    high: number;
    medium: number;
    low: number;
  };
  estimatedMinutes: number;
}

const CVCrossroadsPage: React.FC = () => {
  const { id } = useParams<{ id: string }>();
  const navigate = useNavigate();
  const [reportData, setReportData] = useState<ReportData | null>(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);

  useEffect(() => {
    const fetchReportData = async () => {
      try {
        setLoading(true);
        const response = await fetch(`/api/cv-optimizer/report/${id}/summary`);
        if (!response.ok) {
          throw new Error('Failed to fetch report data');
        }
        const data = await response.json();
        
        // Calculate estimated time: quick=2min, medium=5min, extensive=10min
        const estimatedMinutes = 
          (data.breakdown?.critical || 0) * 10 +
          (data.breakdown?.high || 0) * 5 +
          (data.breakdown?.medium || 0) * 3 +
          (data.breakdown?.low || 0) * 2;
        
        setReportData({
          score: data.score || 0,
          totalIssues: data.total_issues || 0,
          breakdown: {
            critical: data.breakdown?.critical || 0,
            high: data.breakdown?.high || 0,
            medium: data.breakdown?.medium || 0,
            low: data.breakdown?.low || 0,
          },
          estimatedMinutes: estimatedMinutes || 60,
        });
      } catch (err) {
        setError('Failed to load report data');
        console.error(err);
      } finally {
        setLoading(false);
      }
    };

    if (id) {
      fetchReportData();
    }
  }, [id]);

  const handleBluePill = () => {
    // Navigate to fix process
    navigate(`/service/cv-optimizer/fix/${id}`);
  };

  const handleRedPill = () => {
    // Navigate to detailed issues view
    navigate(`/service/cv-optimizer/report/${id}/details`);
  };

  const handleBackToDashboard = () => {
    navigate('/dashboard');
  };

  // Score color based on value
  const getScoreColor = (score: number) => {
    if (score >= 70) return 'text-green-600';
    if (score >= 50) return 'text-yellow-600';
    return 'text-red-600';
  };

  const getScoreRingColor = (score: number) => {
    if (score >= 70) return 'border-green-500';
    if (score >= 50) return 'border-yellow-500';
    return 'border-red-500';
  };

  if (loading) {
    return (
      <div className="flex items-center justify-center min-h-screen">
        <div className="text-center">
          <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"></div>
          <p className="mt-4 text-gray-600">Loading your results...</p>
        </div>
      </div>
    );
  }

  if (error || !reportData) {
    return (
      <div className="flex items-center justify-center min-h-screen">
        <div className="text-center">
          <p className="text-red-600">{error || 'Something went wrong'}</p>
          <button 
            onClick={handleBackToDashboard}
            className="mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg"
          >
            Back to Dashboard
          </button>
        </div>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gray-50 py-8">
      <div className="max-w-4xl mx-auto px-4">
        {/* Back Button */}
        <button
          onClick={handleBackToDashboard}
          className="flex items-center text-gray-600 hover:text-gray-800 mb-6"
        >
          <span className="mr-2">â†</span> Back to Dashboard
        </button>

        {/* Score Section */}
        <div className="bg-white rounded-xl shadow-sm p-8 mb-6">
          <h2 className="text-2xl font-bold text-center text-gray-800 mb-6">
            ğŸ“Š Your CV Score
          </h2>
          
          <div className="flex justify-center mb-4">
            <div className={`w-32 h-32 rounded-full border-8 ${getScoreRingColor(reportData.score)} flex items-center justify-center bg-white`}>
              <span className={`text-4xl font-bold ${getScoreColor(reportData.score)}`}>
                {reportData.score}%
              </span>
            </div>
          </div>
          
          <p className="text-center text-gray-600">
            {reportData.score >= 70 
              ? 'Good foundation! Some improvements will help you stand out.'
              : reportData.score >= 50
              ? 'Your CV needs improvement to compete effectively.'
              : 'Significant improvements needed to attract recruiters.'}
          </p>
        </div>

        {/* Issues Summary */}
        <IssuesSummaryBox
          totalIssues={reportData.totalIssues}
          breakdown={reportData.breakdown}
          estimatedMinutes={reportData.estimatedMinutes}
        />

        {/* Choose Your Path */}
        <div className="text-center mb-6">
          <h2 className="text-2xl font-bold text-gray-800">Choose Your Path</h2>
          <p className="text-gray-600 mt-2">How would you like to improve your CV?</p>
        </div>

        {/* Path Cards */}
        <div className="grid md:grid-cols-2 gap-6 mb-8">
          <PathCard
            variant="blue"
            title="The Easy Way"
            description="Fix all"
            issueCount={reportData.totalIssues}
            features={[
              'âš¡ Done in ~30 seconds',
              'ğŸ¤– AI does the work',
              'ğŸ¯ ~85% auto-fixed',
              'ğŸ“¥ Download improved CV'
            ]}
            buttonText="ğŸš€ Fix My CV Now"
            onClick={handleBluePill}
            badge="âœ¨ Most users choose this option"
          />
          
          <PathCard
            variant="red"
            title="The Deep Dive"
            description="Review all"
            issueCount={reportData.totalIssues}
            features={[
              `â±ï¸ ~${Math.floor(reportData.estimatedMinutes / 60)}h ${reportData.estimatedMinutes % 60}m manual work`,
              'âœ‹ You\'re in full control',
              'ğŸ¯ Fix what you choose',
              'ğŸ“š Learn as you go'
            ]}
            buttonText="ğŸ” View All Issues"
            onClick={handleRedPill}
            badge="For those who want full control"
          />
        </div>

        {/* Tip */}
        <div className="bg-blue-50 border border-blue-200 rounded-lg p-4 text-center">
          <p className="text-blue-800">
            ğŸ’¡ <strong>Tip:</strong> You can always switch paths. Start with auto-fix, 
            then review any remaining issues that need your input.
          </p>
        </div>
      </div>
    </div>
  );
};

export default CVCrossroadsPage;

Step 3: Verify the file is created correctly

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

FILES TO CREATE:
- client/src/pages/CVCrossroadsPage.tsx

FILES TO MODIFY:
- None

DO NOT TOUCH:
- All other files
- Routes (handled in next prompt)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

WHEN COMPLETE:

Confirm:
â–¡ CVCrossroadsPage.tsx created in client/src/pages/
â–¡ Component imports IssuesSummaryBox and PathCard
â–¡ Component fetches data from /api/cv-optimizer/report/{id}/summary
â–¡ Blue pill navigates to /service/cv-optimizer/fix/{id}
â–¡ Red pill navigates to /service/cv-optimizer/report/{id}/details
â–¡ No TypeScript errors
â–¡ No other files modified

Type "PROMPT 3#7 COMPLETE - READY FOR 4#7" when done.