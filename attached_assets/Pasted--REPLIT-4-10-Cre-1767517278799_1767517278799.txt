â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ’» REPLIT-4#10: Create Certification Count Detector
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âš ï¸ ANTI-IMPROVISATION DIRECTIVE:
- Execute ONLY the instructions below
- Create ONLY the specified file
- Do NOT add extra features
- If unclear â†’ STOP and ask

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

PROBLEM:

No detector exists for "too many certifications".
Research shows: 3-5 ideal, 6-8 acceptable, 13+ dilutes impact.

EXPECTED BEHAVIOR:
- Count certifications in CV
- Warn if count exceeds threshold (9+)
- Suggest focusing on most relevant certifications

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

FILE TO CREATE:

backend/common/detection/certification_detector.py

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

COMPLETE CODE:

"""
Certification Detector

Detects issues related to certifications section.
- Too many certifications (dilutes impact)
- Missing certification details (optional)

DETERMINISTIC: Same text â†’ Same issues (always)
"""

import re
from typing import List, Dict

# Thresholds based on research
CERT_THRESHOLD_WARNING = 9   # Start warning at 9+
CERT_THRESHOLD_CRITICAL = 13  # Critical at 13+
CERT_IDEAL_MAX = 5           # Ideal is 3-5

# Patterns that indicate certification lines
CERT_LINE_PATTERNS = [
    r'^\s*[â€¢\-\*]\s*.*(?:certified|certificate|certification)',
    r'^\s*[â€¢\-\*]\s*.*\((?:aws|gcp|azure|ibm|google|microsoft|oracle|cisco)\)',
    r'^\s*[â€¢\-\*]\s*(?:aws|gcp|azure|ibm|google|microsoft)\s+\w+',
    r'^\s*[â€¢\-\*]\s*.*(?:professional|associate|specialist|expert|master)\s+(?:level|cert)',
    r'^\s*[â€¢\-\*]\s*.*(?:coursera|udemy|linkedin learning|skillup|pluralsight)',
]

# Section headers that indicate certification section
CERT_SECTION_HEADERS = [
    'certifications', 'certificates', 'professional certifications',
    'licenses & certifications', 'credentials', 'professional development'
]


def find_certification_section(text: str) -> str:
    """Extract the certifications section from CV."""
    text_lower = text.lower()
    
    for header in CERT_SECTION_HEADERS:
        start_idx = text_lower.find(header)
        if start_idx != -1:
            # Find next section
            next_section_headers = [
                'experience', 'education', 'skills', 'projects',
                'awards', 'publications', 'references', 'languages',
                'summary', 'about', 'work history'
            ]
            
            end_idx = len(text)
            search_start = start_idx + len(header)
            
            for next_header in next_section_headers:
                next_idx = text_lower.find(next_header, search_start)
                if next_idx != -1 and next_idx < end_idx:
                    end_idx = next_idx
            
            return text[start_idx:end_idx]
    
    return ""


def count_certifications(text: str) -> int:
    """
    Count the number of certifications in CV.
    Uses multiple heuristics to identify certification lines.
    """
    cert_section = find_certification_section(text)
    
    if not cert_section:
        # No clear certification section - count based on patterns
        count = 0
        for line in text.split('\n'):
            line_lower = line.lower()
            if any(indicator in line_lower for indicator in [
                'certified', 'certificate', 'certification',
                'coursera', 'udemy', 'linkedin learning'
            ]):
                count += 1
        return count
    
    # Count bullet points in certification section
    lines = cert_section.split('\n')
    cert_count = 0
    
    for line in lines:
        line = line.strip()
        
        # Skip empty lines and section header
        if not line or any(h in line.lower() for h in CERT_SECTION_HEADERS):
            continue
        
        # Count lines that start with bullet or look like cert items
        if (line.startswith('â€¢') or line.startswith('-') or 
            line.startswith('*') or line.startswith('Â·')):
            cert_count += 1
        elif re.match(r'^\d+\.', line):  # Numbered list
            cert_count += 1
        elif any(indicator in line.lower() for indicator in [
            'certified', 'certificate', 'certification', '(ibm)', '(google)',
            '(aws)', '(microsoft)', '(azure)'
        ]):
            cert_count += 1
    
    return cert_count


def detect_certification_count_issues(text: str) -> List[Dict]:
    """
    Detect if CV has too many certifications.
    
    Thresholds:
    - 1-5: Ideal (no issue)
    - 6-8: Acceptable (no issue)
    - 9-12: Warning (consider severity)
    - 13+: Critical (definitely flag)
    """
    issues = []
    
    cert_count = count_certifications(text)
    
    if cert_count >= CERT_THRESHOLD_CRITICAL:
        issues.append({
            'issue_type': 'CONTENT_TOO_MANY_CERTIFICATIONS',
            'match_text': f'{cert_count} certifications listed',
            'suggestion': f'You have {cert_count} certifications listed. Consider featuring only the top {CERT_IDEAL_MAX} most relevant ones. Too many certifications can dilute impact and suggest lack of focus.',
            'severity': 'important',
            'can_auto_fix': False,  # Requires user decision
            'details': {
                'certification_count': cert_count,
                'threshold': CERT_THRESHOLD_CRITICAL,
                'recommended_max': CERT_IDEAL_MAX
            }
        })
    elif cert_count >= CERT_THRESHOLD_WARNING:
        issues.append({
            'issue_type': 'CONTENT_TOO_MANY_CERTIFICATIONS',
            'match_text': f'{cert_count} certifications listed',
            'suggestion': f'You have {cert_count} certifications. Consider focusing on the {CERT_IDEAL_MAX} most relevant to your target role for maximum impact.',
            'severity': 'consider',
            'can_auto_fix': False,
            'details': {
                'certification_count': cert_count,
                'threshold': CERT_THRESHOLD_WARNING,
                'recommended_max': CERT_IDEAL_MAX
            }
        })
    
    return issues


def detect_all_certification_issues(text: str) -> List[Dict]:
    """
    Main entry point for certification detection.
    
    DETERMINISTIC: Same text â†’ Same issues (always)
    """
    return detect_certification_count_issues(text)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

DO NOT TOUCH:
- Any other files (registration will be done in REPLIT-7#10)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

VERIFICATION:

Test with CV that has 13+ certifications:
- Should return 1 issue: CONTENT_TOO_MANY_CERTIFICATIONS
- severity: important
- can_auto_fix: false

Test with CV that has 5 certifications:
- Should return NO issues

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

WHEN COMPLETE:

Confirm:
â–¡ certification_detector.py created
â–¡ count_certifications function works
â–¡ Thresholds: 9 = warning, 13 = critical
â–¡ can_auto_fix is FALSE (user must decide which to remove)
â–¡ No Python syntax errors

Type "REPLIT-4#10 COMPLETE - READY FOR NEXT" when done.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•